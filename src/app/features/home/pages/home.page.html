<ion-content [fullscreen]="true" class="bg-gray-100">
  <div class="main-content">
    <!-- Header -->
    <div class="flex justify-between items-center p-4">
      <div class="flex items-center">
        <h1 class="text-lg font-bold">Oeuvres & écrits</h1>
      </div>
      <ion-button fill="clear" class="text-black p-0" (click)="openUserProfileModal()">
        <ion-icon slot="icon-only" name="person" class="text-2xl"></ion-icon>
      </ion-button>
    </div>

    <div class="md:container md:mx-auto px-2 pb-16 ">
      <!-- Search Bar Container -->
      <div class="px-4 py-2 transition-all duration-500" [ngClass]="{'hidden': !searchExpanded}">
        <div class="flex items-center bg-white rounded-full px-3 border border-gray-300">
          <ion-input placeholder="Rechercher" class="text-gray-800 custom-input " [(ngModel)]="searchQuery"></ion-input>
          <ion-button fill="clear" size="small" (click)="toggleSearch()" class="text-gray-500 p-0">
            <ion-icon slot="icon-only" name="close-outline"></ion-icon>
          </ion-button>
        </div>
      </div>

      <!-- Navigation Tabs -->
      <div class="flex overflow-x-auto hide-scrollbar" *ngIf="!searchExpanded">
        <div class="bg-black text-white rounded-full px-4 py-2 mx-2 my-2 flex items-center whitespace-nowrap">
          <ion-icon name="newspaper-outline" class="mr-1"></ion-icon>
          <span>Actus</span>
        </div>
        <div
          class="bg-white border border-gray-300 text-gray-700 rounded-full px-4 py-2 mx-2 my-2 flex items-center whitespace-nowrap">
          <ion-icon name="airplane-outline" class="mr-1"></ion-icon>
          <span class="hidden md:block">Voyages</span>
        </div>
        <div
          class="bg-white border border-gray-300 text-gray-700 rounded-full px-4 py-2 mx-2 my-2 flex items-center whitespace-nowrap">
          <ion-icon name="grid-outline" class="mr-1"></ion-icon>
          <span class="hidden md:block">Événements</span>
        </div>
        <div
          class="bg-white border border-gray-300 text-gray-700 rounded-full px-4 py-2 mx-2 my-2 flex items-center whitespace-nowrap"
          (click)="toggleSearch()">
          <ion-icon name="search-outline" class="mr-1"></ion-icon>
          <span class="hidden md:block">Recherche</span>
        </div>
      </div>
      <!-- Main Content -->
      <div class="p-2">
        <!-- Gamou Section -->
        <div class="mb-4">
          <!-- Horizontal Scroll Cards -->
          <div class="overflow-x-auto hide-scrollbar mb-4">
            <div class="flex">
              <div *ngFor="let item of gamouItems" class="min-w-60 mr-4 relative">
                <div class="rounded-xl overflow-clip bg-none shadow-sm">
                  <img [src]="item.image" alt="Gamou" class="w-full h-48 md:h-52 object-cover ">
                  <div
                    class="absolute bottom-0 left-0 right-0 p-3 text-white bg-gradient-to-t from-black/80 to-transparent rounded-xl">
                    <h3 class="font-bold text-sm">{{ item.title }}</h3>
                    <p class="text-xs">{{ item.subtitle }}</p>
                    <p class="text-xs">{{ item.date }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Category Buttons -->
          <div
            class="grid grid-cols-4 bg-black/90 text-white text-center rounded-lg my-2 text-xs max-w-lg mx-auto border-b-4 border-yellow-500">
            <div class="p-3 border-r border-white/20 flex flex-col items-center justify-between">
              <ion-icon name="bookmark-outline" class="text-lg mb-1"></ion-icon>
              <span class="!font-thin !text-xs">Mes favoris</span>
            </div>
            <div class="p-3 border-r border-white/20 flex flex-col items-center justify-between">
              <ion-icon name="wallet-outline" class="text-lg mb-1"></ion-icon>
              <span class="!font-thin !text-xs">Mes contributions</span>
            </div>
            <div class="p-3 border-r border-white/20 flex flex-col items-center justify-between">
              <ion-icon name="people-outline" class="text-lg mb-1"></ion-icon>
              <span class="!font-thin !text-xs">Dahira</span>
            </div>
            <div class="p-3 flex flex-col items-center justify-between">
              <ion-icon name="book-outline" class="text-lg mb-1"></ion-icon>
              <span class="!font-thin !text-xs">Mes ouvrages</span>
            </div>
          </div>
        </div>

        <!-- Citations Section -->
        <div>
          <div class="flex items-center px-2 my-4">
            <!-- <ion-icon name="menu-outline" class="mr-2"></ion-icon> -->
            <h2 class="font-bold">Citations de Cheikh Al Islam</h2>
          </div>

          <!-- Citation Cards -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-2">
            <div *ngFor="let citation of citationItems" class="mb-4">
              <div class="flex bg-white rounded-lg overflow-hidden shadow max-h-48">
                <div class="w-1/3">
                  <img [src]="citation.image" alt="Citation" class="w-full h-48 md:h-60 object-cover ">
                </div>
                <div class="w-2/3 p-3 relative flex flex-col justify-between">
                  <h3 class="font-bold text-base mb-1 truncate">{{ citation.title }}</h3>
                  <p class="text-xs text-gray-600 italic mb-1">{{ citation.date }}</p>
                  <p class="text-xs line-clamp-5">{{ citation.content }}</p>

                  <div class="flex justify-end mt-2">
                    <ion-button fill="clear" size="small" class="text-black p-0 mr-2">
                      <ion-icon slot="icon-only" name="bookmark-outline"></ion-icon>
                    </ion-button>
                    <ion-button fill="clear" size="small" class="text-black p-0">
                      <ion-icon slot="icon-only" name="share-social-outline"></ion-icon>
                    </ion-button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</ion-content>