<!-- HTML -->
<div class="w-full max-w-full p-4 bg-gray-100 min-h-screen" (click)="closeMenu()">
  <!-- En-tête -->
  <div class="flex flex-col space-y-4">
    <div class="flex justify-between items-center">
      <h1 class="text-2xl font-semibold text-gray-700">Événements</h1>
    </div>
      <div class=" mx-auto w-full">
    <!-- <div class="flex items-center justify-between px-5 py-4 rounded-xl border border-amber-200"
      [ngClass]="{'bg-amber-100/70 shadow-sm': isHovered, 'bg-amber-50': !isHovered}" (mouseenter)="isHovered = true"
      (mouseleave)="isHovered = false">
      <div class="flex items-center space-x-4">
        <div class="relative">
            <svg class="w-10 h-10 text-amber-700" width="34" height="34" viewBox="0 0 51 60" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.1447 51.3948C20.6255 51.0816 29.6487 51.0816 31.1295 51.3948C32.3954 51.6872 33.7643 52.3704 33.7643 53.862C33.6907 55.2821 32.8576 56.5411 31.7065 57.3406C30.2139 58.5041 28.4623 59.241 26.6312 59.5065C25.6184 59.6378 24.6234 59.6407 23.646 59.5065C21.8119 59.241 20.0603 58.5041 18.5707 57.3376C17.4166 56.5411 16.5835 55.2821 16.5099 53.862C16.5099 52.3704 17.8788 51.6872 19.1447 51.3948ZM25.312 0.36364C31.4736 0.36364 37.7678 3.28731 41.5066 8.13822C43.9324 11.2618 45.0452 14.3823 45.0452 19.2332V20.4952C45.0452 24.2154 46.0285 26.4082 48.1923 28.9351C49.832 30.7967 50.3561 33.1863 50.3561 35.7788C50.3561 38.3684 49.5053 40.8266 47.8007 42.8225C45.5692 45.2151 42.4222 46.7426 39.2103 47.0081C34.556 47.4049 29.8986 47.739 25.1795 47.739C20.4574 47.739 15.8031 47.5391 11.1487 47.0081C7.93391 46.7426 4.78684 45.2151 2.55828 42.8225C0.853742 40.8266 0 38.3684 0 35.7788C0 33.1863 0.526965 30.7967 2.16379 28.9351C4.3953 26.4082 5.31381 24.2154 5.31381 20.4952V19.2332C5.31381 14.2511 6.55615 10.9933 9.11443 7.80408C12.918 3.15306 19.0149 0.36364 25.047 0.36364H25.312Z" fill="#181818"/>
              </svg>
          <div class="absolute -top-1 -right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center">
            <span class="text-white text-xs font-bold">2</span>
          </div>
        </div>
        <span class="text-gray-800 font-semibold text-sm">02 Nouvelles demandes à approuver</span>
      </div>

      <button
        class="flex items-center px-4 py-2 text-sm font-medium rounded-lg bg-amber-200 hover:bg-amber-300 text-amber-800"
        [ngClass]="{'translate-x-0': isHovered, '-translate-x-1': !isHovered}">
        Afficher
        <svg class="w-4 h-4 ml-1" [ngClass]="{'translate-x-1': isHovered, '': !isHovered}" fill="none"
          stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>
    </div> -->
  </div>

    <!-- Barre de recherche -->
    <div class="flex justify-between">
      <div class="relative w-1/2">
        <input type="text" (input)="search($event)" placeholder="Rechercher un événement"
          class="w-full p-2 rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute right-3 top-3.5" fill="none"
          viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>

      <!-- Bouton d'ajout -->
      <button (click)="openAddModal()"
        class="ml-auto mr-2 flex items-center justify-center rounded-full h-10 w-10 bg-green-600 text-white hover:bg-green-700 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
      </button>

      <!-- Bouton de filtre -->
      <button
        class="flex items-center justify-center rounded-full h-10 w-10 bg-white shadow text-gray-700 hover:bg-gray-100 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
        </svg>
      </button>
    </div>

    <!-- Filtres rapides -->
    <div class="flex space-x-3 mb-6 overflow-x-auto pb-2">
      <button (click)="setFilter('Toutes')"
        [ngClass]="{'bg-gray-800 text-white': activeFilter === 'Toutes', 'bg-gray-100 text-gray-800': activeFilter !== 'Toutes'}"
        class="px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
        Toutes
      </button>
      <button (click)="setFilter('Religieux')"
        [ngClass]="{'bg-gray-800 text-white': activeFilter === 'Religieux', 'bg-gray-100 text-gray-800': activeFilter !== 'Religieux'}"
        class="px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
        Religieux
      </button>
      <button (click)="setFilter('Culturel')"
        [ngClass]="{'bg-gray-800 text-white': activeFilter === 'Culturel', 'bg-gray-100 text-gray-800': activeFilter !== 'Culturel'}"
        class="px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
        Culturel
      </button>
      <button (click)="setFilter('Retraite')"
        [ngClass]="{'bg-gray-800 text-white': activeFilter === 'Retraite', 'bg-gray-100 text-gray-800': activeFilter !== 'Retraite'}"
        class="px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
        Retraites
      </button>
      <button (click)="setFilter('Pèlerinage')"
        [ngClass]="{'bg-gray-800 text-white': activeFilter === 'Pèlerinage', 'bg-gray-100 text-gray-800': activeFilter !== 'Pèlerinage'}"
        class="px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap">
        Pèlerinages
      </button>
    </div>
  </div>

  <!-- Grille d'événements -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
    <div *ngFor="let event of getPaginatedEvents()" class="bg-white rounded-lg shadow-md overflow-hidden"
      (click)="viewDetails(event)">
      <!-- Image de l'événement -->
      <div class="relative h-48 w-full">
        <img title="{{ event.title }}" [src]="event.image" [alt]="event.title" class="w-full h-full object-cover">
        <span [ngClass]="{
            'bg-blue-500': event.category === 'Religieux',
            'bg-purple-500': event.category === 'Culturel',
            'bg-green-500': event.category === 'Retraite',
            'bg-amber-500': event.category === 'Pèlerinage'
          }" class="absolute top-4 right-4 px-2.5 py-0.5 rounded-full text-xs font-medium text-white">
          {{ event.category }}
        </span>
        <!-- Status (Ajouté) -->
        <span [ngClass]="{
          'bg-yellow-500': event.status === 'En cours',
          'bg-red-500': event.status === 'Terminé',
          'bg-green-600': event.status === 'À venir'
        }" class="absolute bottom-4 left-4 px-2.5 py-1 rounded-md text-xs font-medium text-white flex items-center">
          <span class="h-2 w-2 rounded-full bg-white mr-1.5"></span>
          {{ event.status }}
        </span>
      </div>

      <div class="p-5">
        <div class="flex justify-between items-start">
          <h2 class="text-xl font-medium text-gray-800">{{ event.title }}</h2>

          <!-- Menu contextuel -->
          <div class="relative ml-2">
            <button (click)="toggleMenu(event.title, $event)"
              class="p-1 rounded-full hover:bg-gray-100 focus:outline-none">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-500" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
              </svg>
            </button>


            <!-- Menu contextuel -->
            <div *ngIf="activeMenuId === event.title"
              class="fixed bg-white rounded-lg shadow-lg py-2 z-50 w-48 border border-gray-200">
              <button (click)="viewDetails(event)"
                class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2">
                <svg class="h-5 w-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z">
                  </path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
                  </path>
                </svg>
                <span>Voir les détails</span>
              </button>

              <button (click)="openEditModal(event, $event)"
                class="w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2">
                <svg class="h-5 w-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z">
                  </path>
                </svg>
                <span>Modifier</span>
              </button>

              <button (click)="confirmDelete(event, $event)"
                class="w-full px-4 py-2 text-left hover:bg-gray-100 text-red-600 flex items-center gap-2">
                <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">
                  </path>
                </svg>
                <span>Supprimer</span>
              </button>
            </div>
          </div>
        </div>

        <!-- Localisation -->
        <div class="flex items-center mt-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500 mr-1" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          <p class="text-sm text-gray-600">{{ event.location }}</p>
        </div>

        <!-- Description -->
        <p class="mt-3 text-gray-600 text-sm line-clamp-2">{{ event.description }}</p>

        <!-- Infos supplémentaires -->
        <div class="mt-4 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500 mr-1" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <p class="text-sm text-gray-500 mr-4">{{ event.duration }}</p>

          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500 mr-1" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
          </svg>
          <p class="text-sm text-gray-500">{{ event.participants }} participants</p>
        </div>

        <!-- Date de l'événement -->
        <div class="mt-4 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500 mr-1" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
          </svg>
          <p class="text-sm text-gray-500">{{ event.date }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination -->
  <div *ngIf="totalPages > 1" class="flex items-center justify-center mt-8 space-x-2">
    <button (click)="prevPage()" [disabled]="currentPage === 1"
      [ngClass]="{'opacity-50 cursor-not-allowed': currentPage === 1}"
      class="px-3 py-1 rounded-md bg-white border border-gray-300 shadow-sm hover:bg-gray-50 focus:outline-none">
      Précédent
    </button>
    <div *ngFor="let page of getPageArray(); let i = index">
      <button (click)="goToPage(i + 1)"
        [ngClass]="{'bg-green-600 text-white': currentPage === i + 1, 'bg-white text-gray-700': currentPage !== i + 1}"
        class="px-3 py-1 rounded-md border border-gray-300 shadow-sm hover:bg-green-50 focus:outline-none">
        {{ i + 1 }}
      </button>
    </div>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages"
      [ngClass]="{'opacity-50 cursor-not-allowed': currentPage === totalPages}"
      class="px-3 py-1 rounded-md bg-white border border-gray-300 shadow-sm hover:bg-gray-50 focus:outline-none">
      Suivant
    </button>
  </div>
</div>

<!-- Modal de confirmation de suppression -->
<div *ngIf="showDeleteConfirmation" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-md p-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">Confirmer la suppression</h3>
    <p class="text-gray-600 mb-6">Êtes-vous sûr de vouloir supprimer l'événement "{{ selectedEvent?.title }}" ? Cette
      action est irréversible.</p>
    <div class="flex justify-end space-x-4">
      <button (click)="closeDeleteConfirmation()"
        class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none">
        Annuler
      </button>
      <button (click)="deleteEvent()"
        class="px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 focus:outline-none">
        Supprimer
      </button>
    </div>
  </div>
</div>

<!-- Modal d'ajout d'événement -->
<div *ngIf="showAddModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-xl p-6">
    <h3 class="text-xl font-semibold text-gray-800 mb-6">Ajouter un événement</h3>

    <form (ngSubmit)="addEvent()" #addForm="ngForm">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div class="col-span-2">
          <label for="title" class="block text-sm font-medium text-gray-700 mb-1">Titre</label>
          <input type="text" id="title" name="title" [(ngModel)]="newEvent.title" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>

        <div class="col-span-2">
          <label for="location" class="block text-sm font-medium text-gray-700 mb-1">Lieu</label>
          <input type="text" id="location" name="location" [(ngModel)]="newEvent.location" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>

        <div class="col-span-2">
          <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
          <textarea id="description" name="description" [(ngModel)]="newEvent.description" rows="3" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
        </div>

        <div>
          <label for="category" class="block text-sm font-medium text-gray-700 mb-1">Catégorie</label>
          <select id="category" name="category" [(ngModel)]="newEvent.category" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            <option value="Religieux">Religieux</option>
            <option value="Culturel">Culturel</option>
            <option value="Retraite">Retraite</option>
            <option value="Pèlerinage">Pèlerinage</option>
          </select>
        </div>

        <div>
          <label for="duration" class="block text-sm font-medium text-gray-700 mb-1">Durée</label>
          <input type="text" id="duration" name="duration" [(ngModel)]="newEvent.duration" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>

        <div>
          <label for="date" class="block text-sm font-medium text-gray-700 mb-1">Date</label>
          <input type="text" id="date" name="date" [(ngModel)]="newEvent.date" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>

        <div>
          <label for="participants" class="block text-sm font-medium text-gray-700 mb-1">Nombre de participants</label>
          <input type="number" id="participants" name="participants" [(ngModel)]="newEvent.participants" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>
      </div>

      <div class="flex justify-end space-x-4 mt-6">
        <button type="button" (click)="closeAddModal()"
          class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none">
          Annuler
        </button>
        <button type="submit" class="px-4 py-2 text-white bg-green-600 rounded-lg hover:bg-green-700 focus:outline-none"
          [disabled]="!addForm.form.valid">
          Ajouter
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modal de modification d'événement -->
<div *ngIf="showEditModal && selectedEvent"
  class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-xl p-6">
    <h3 class="text-xl font-semibold text-gray-800 mb-6">Modifier l'événement</h3>

    <form (ngSubmit)="updateEvent()" #editForm="ngForm">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div class="col-span-2">
          <label for="edit-title" class="block text-sm font-medium text-gray-700 mb-1">Titre</label>
          <input type="text" id="edit-title" name="title" [(ngModel)]="selectedEvent.title" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>

        <div class="col-span-2">
          <label for="edit-location" class="block text-sm font-medium text-gray-700 mb-1">Lieu</label>
          <input type="text" id="edit-location" name="location" [(ngModel)]="selectedEvent.location" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>

        <div class="col-span-2">
          <label for="edit-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
          <textarea id="edit-description" name="description" [(ngModel)]="selectedEvent.description" rows="3" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
        </div>

        <div>
          <label for="edit-category" class="block text-sm font-medium text-gray-700 mb-1">Catégorie</label>
          <select id="edit-category" name="category" [(ngModel)]="selectedEvent.category" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            <option value="Religieux">Religieux</option>
            <option value="Culturel">Culturel</option>
            <option value="Retraite">Retraite</option>
            <option value="Pèlerinage">Pèlerinage</option>
          </select>
        </div>

        <div>
          <label for="edit-duration" class="block text-sm font-medium text-gray-700 mb-1">Durée</label>
          <input type="text" id="edit-duration" name="duration" [(ngModel)]="selectedEvent.duration" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>

        <div>
          <label for="edit-date" class="block text-sm font-medium text-gray-700 mb-1">Date</label>
          <input type="text" id="edit-date" name="date" [(ngModel)]="selectedEvent.date" required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>

        <div>
          <label for="edit-participants" class="block text-sm font-medium text-gray-700 mb-1">Nombre de
            participants</label>
          <input type="number" id="edit-participants" name="participants" [(ngModel)]="selectedEvent.participants"
            required
            class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
        </div>
      </div>

      <div class="flex justify-end space-x-4 mt-6">
        <button type="button" (click)="closeEditModal()"
          class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none">
          Annuler
        </button>
        <button type="submit" class="px-4 py-2 text-white bg-green-600 rounded-lg hover:bg-green-700 focus:outline-none"
          [disabled]="!editForm.form.valid">
          Mettre à jour
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modal d'ajout de participant -->
<div *ngIf="showAddParticipantModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-lg p-6">
    <h3 class="text-lg font-semibold text-gray-800 mb-4">Ajouter un participant</h3>

    <div class="mb-4">
      <div class="relative">
        <input type="text" [(ngModel)]="participantSearchQuery" (input)="searchAvailableUsers()"
          placeholder="Rechercher un utilisateur"
          class="w-full p-2 rounded-lg border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute right-3 top-3" fill="none"
          viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>
    </div>

    <div class="max-h-64 overflow-y-auto">
      <div *ngFor="let user of filteredAvailableUsers"
        class="flex items-center justify-between p-3 hover:bg-gray-50 cursor-pointer rounded-lg"
        (click)="selectUserToAdd(user)">
        <div class="flex items-center space-x-3">
          <div class="rounded-full h-10 w-10 flex items-center justify-center bg-gray-200 text-gray-600">
            {{ getInitials(user.name) }}
          </div>
          <div>
            <p class="text-sm font-medium text-gray-900">{{ user.name }}</p>
            <p class="text-xs text-gray-500">{{ user.email }}</p>
          </div>
        </div>
        <div>
          <span [ngClass]="{
              'bg-green-100 text-green-800': user.status === 'Disciple',
              'bg-blue-100 text-blue-800': user.status === 'Moukhadam',
              'bg-gray-100 text-gray-800': user.status === 'Visiteur'
            }" class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full">
            {{ user.status }}
          </span>
        </div>
      </div>
      <div *ngIf="filteredAvailableUsers.length === 0" class="p-3 text-center text-sm text-gray-500">
        Aucun utilisateur trouvé
      </div>
    </div>

    <div class="flex justify-end space-x-4 mt-6">
      <button (click)="closeAddParticipantModal()"
        class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 focus:outline-none">
        Fermer
      </button>
    </div>
  </div>
</div>